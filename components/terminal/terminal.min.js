/*
  ___ ___     _____     _________  ___ ___     _____    _______   ._.
 /   |   \   /  _  \   /   _____/ /   |   \   /  _  \   \      \  | |
/    ~    \ /  /_\  \  \_____  \ /    ~    \ /  /_\  \  /   |   \ | |
\    Y    //    |    \ /        \\    Y    //    |    \/    |    \ \|
 \___|_  / \____|__  //_______  / \___|_  / \____|__  /\____|__  / __
       \/          \/         \/        \/          \/         \/  \/

*/
/* COPYRIGHT HASHAN PUNCHIHEWA (2013) */ !function(){var a={exports:{}},b=a.exports,c=stream.Writable.extend({constructor:function(a){this.__super__({objectMode:!0}),this.el=document.querySelector('output[for~="'+a+'"]'),console.log(a)},_write:function(a,b,c){ES.append(this.el,a),c()},clear:function(){ES.clear(this.el)}}),d=ES.Controller.extend({constructor:function(a){this.inputEl=a.querySelector("input"),this.inputEl.className="cmdline",this.inputEl.id="command",this.inputLine=document.createElement("div"),this.inputLine.id="input-line",this.inputLine.className="input-line",this.promptEl=document.createElement("div"),this.promptEl.className="prompt",this.promptEl.innerHTML=this.prompt||"$&gt;",this.out=new c(a.id),ES.wrap(this.inputLine,this.inputEl),ES.prepend(this.inputLine,this.promptEl),this.__super__(a),this.interlace=document.createElement("div"),this.interlace.classList.add("interlace"),ES.insertBefore(this.el,this.interlace),this.history=[]},events:{"output DOMSubtreeModified":"recalculateHeight","input keydown":"processNewCommand"},recalculateHeight:function(){var a=ES.getDocHeight();document.documentElement.style.height=a+"px",this.interlace.style.height=a+"px";var b=this.inputLine;setTimeout(function(){ES.scrollTo(b)},0)},screenFlicker:function(a){(a.ctrlKey||a.metaKey)&&83==a.keyCode&&(container_.classList.toggle("flicker"),this.output("<div>Screen flicker: "+(container_.classList.contains("flicker")?"on":"off")+"</div>"),a.preventDefault(),a.stopPropagation())},processNewCommand:function(a){if(13===a.keyCode){var b=(this.inputEl.value,ES.clone(this.inputLine));this.inputEl.readonly=!0;{b.querySelector("input")}this.out.write(b),this.inputEl.readonly=!1,this.inputEl.value=""}this.screenFlicker(a)},clear:function(){this.out.clear(),document.documentElement.style.height="100%",this.interlace.style.height="100%"},write:function(a){ES.append(this.outputEl,a),ES.scrollTo(this.inputLine)}});b["default"]=d;for(var e in a.exports)window[e]=a.exports[e]}();