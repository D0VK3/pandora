!function t(e,n,r){function i(o,u){if(!n[o]){if(!e[o]){var s="function"==typeof require&&require;if(!u&&s)return s(o,!0);if(l)return l(o,!0);throw new Error("Cannot find module '"+o+"'")}var a=n[o]={exports:{}};e[o][0].call(a.exports,function(t){var n=e[o][1][t];return i(n?n:t)},a,a.exports,t,e,n,r)}return n[o].exports}for(var l="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(t,e){var n=t("dustjs-linkedin/lib/dust");e.exports="/Users/Hashan/Dropbox/Sites/Styles53/app/blogs/editor.dust",function(){function t(t,n){return t.write('<div class="editor-toolbar">').helper("eq",n,{"else":e,block:r},{key:n._get(!1,["mode"]),value:"rich-text-editor"}).write('<select class="editor-mode" name="').reference(n._get(!1,["modeName"]),n,"h").write('"><option value="rich-text-editor" ').helper("eq",n,{block:i},{key:n._get(!1,["mode"]),value:"rich-text-editor"}).write('>Rich Text Editor</option><option value="latex" ').helper("eq",n,{block:l},{key:n._get(!1,["mode"]),value:"latex"}).write('>Latex</option></select></div><div class="editor-views">').helper("eq",n,{"else":o,block:u},{key:n._get(!1,["mode"]),value:"rich-text-editor"}).write("</div>")}function e(t){return t.write('<ul role="tablist"><li class="active"><a class="open-editor">Editor</a></li><li><a class="open-preview">Preview</a></li></ul>')}function r(t){return t.write('<div class="editor-formating"><ul><button value="bold"><i class="fi-bold"></i></button><button value="italic"><i class="fi-italic"></i></button><button value="underline"><i class="fi-underline"></i></button></ul><ul><button value="insertOrderedList"><i class="fi-list-number"></i></button><button value="insertUnorderedList"><i class="fi-list-bullet"></i></button></ul><ul><button value="subscript"><i class="fi-subscript"></i></button><button value="superscript"><i class="fi-superscript"></i></button></ul></div><select class="font-control"><option value="Helvetica Neue" selected>Helvetica Neue</option><option value="Arial">Arial</option><option value="Arial Black">Arial Black</option><option value="Comic Sans MS">Comic Sans MS</option><option value="Times New Roman">Times New Roman</option><option value="Tahoma">Tahoma</option><option value="Verdana">Verdana</option><option value="Courier New">Courier New</option></select>')}function i(t){return t.write("selected")}function l(t){return t.write("selected")}function o(t){return t.write('<div contenteditable="true" class="active editor-content"></div><div class="editor-preview"></div>')}function u(t){return t.write('<div contenteditable="true" class="editor-rich editor-content"></div>')}return n.register("/Users/Hashan/Dropbox/Sites/Styles53/app/blogs/editor.dust",t),t}()},{"dustjs-linkedin/lib/dust":9}],2:[function(t,e,n){!function(e,r){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(t,n,i){e.Backbone=r(e,i,t,n)});else if("undefined"!=typeof n){var i=t("underscore");r(e,n,i)}else e.Backbone=r(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(t,e,n,r){{var i=t.Backbone,l=[],o=(l.push,l.slice);l.splice}e.VERSION="1.1.2",e.$=r,e.noConflict=function(){return t.Backbone=i,this},e.emulateHTTP=!1,e.emulateJSON=!1;var u=e.Events={on:function(t,e,n){if(!a(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,r){if(!a(this,"once",t,[e,r])||!e)return this;var i=this,l=n.once(function(){i.off(t,l),e.apply(this,arguments)});return l._callback=e,this.on(t,l,r)},off:function(t,e,r){var i,l,o,u,s,c,f,h;if(!this._events||!a(this,"off",t,[e,r]))return this;if(!t&&!e&&!r)return this._events=void 0,this;for(u=t?[t]:n.keys(this._events),s=0,c=u.length;c>s;s++)if(t=u[s],o=this._events[t]){if(this._events[t]=i=[],e||r)for(f=0,h=o.length;h>f;f++)l=o[f],(e&&e!==l.callback&&e!==l.callback._callback||r&&r!==l.context)&&i.push(l);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=o.call(arguments,1);if(!a(this,"trigger",t,e))return this;var n=this._events[t],r=this._events.all;return n&&c(n,e),r&&c(r,arguments),this},stopListening:function(t,e,r){var i=this._listeningTo;if(!i)return this;var l=!e&&!r;r||"object"!=typeof e||(r=this),t&&((i={})[t._listenId]=t);for(var o in i)t=i[o],t.off(e,r,this),(l||n.isEmpty(t._events))&&delete this._listeningTo[o];return this}},s=/\s+/,a=function(t,e,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)t[e].apply(t,[i,n[i]].concat(r));return!1}if(s.test(n)){for(var l=n.split(s),o=0,u=l.length;u>o;o++)t[e].apply(t,[l[o]].concat(r));return!1}return!0},c=function(t,e){var n,r=-1,i=t.length,l=e[0],o=e[1],u=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,l);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,l,o);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,l,o,u);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e);return}},f={listenTo:"on",listenToOnce:"once"};n.each(f,function(t,e){u[e]=function(e,r,i){var l=this._listeningTo||(this._listeningTo={}),o=e._listenId||(e._listenId=n.uniqueId("l"));return l[o]=e,i||"object"!=typeof r||(i=this),e[t](r,i,this),this}}),u.bind=u.on,u.unbind=u.off,n.extend(e,u);var h=e.Model=function(t,e){var r=t||{};e||(e={}),this.cid=n.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(r=this.parse(r,e)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(h.prototype,u,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,r){var i,l,o,u,s,a,c,f;if(null==t)return this;if("object"==typeof t?(l=t,r=e):(l={})[t]=e,r||(r={}),!this._validate(l,r))return!1;o=r.unset,s=r.silent,u=[],a=this._changing,this._changing=!0,a||(this._previousAttributes=n.clone(this.attributes),this.changed={}),f=this.attributes,c=this._previousAttributes,this.idAttribute in l&&(this.id=l[this.idAttribute]);for(i in l)e=l[i],n.isEqual(f[i],e)||u.push(i),n.isEqual(c[i],e)?delete this.changed[i]:this.changed[i]=e,o?delete f[i]:f[i]=e;if(!s){u.length&&(this._pending=r);for(var h=0,d=u.length;d>h;h++)this.trigger("change:"+u[h],this,f[u[h]],r)}if(a)return this;if(!s)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var r in this.attributes)e[r]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?n.clone(this.changed):!1;var e,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var l in t)n.isEqual(i[l],e=t[l])||((r||(r={}))[l]=e);return r},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=t?n.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,r=t.success;return t.success=function(n){return e.set(e.parse(n,t),t)?(r&&r(e,n,t),void e.trigger("sync",e,n,t)):!1},M(this,t),this.sync("read",this,t)},save:function(t,e,r){var i,l,o,u=this.attributes;if(null==t||"object"==typeof t?(i=t,r=e):(i={})[t]=e,r=n.extend({validate:!0},r),i&&!r.wait){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;i&&r.wait&&(this.attributes=n.extend({},u,i)),void 0===r.parse&&(r.parse=!0);var s=this,a=r.success;return r.success=function(t){s.attributes=u;var e=s.parse(t,r);return r.wait&&(e=n.extend(i||{},e)),n.isObject(e)&&!s.set(e,r)?!1:(a&&a(s,t,r),void s.trigger("sync",s,t,r))},M(this,r),l=this.isNew()?"create":r.patch?"patch":"update","patch"===l&&(r.attrs=i),o=this.sync(l,this,r),i&&r.wait&&(this.attributes=u),o},destroy:function(t){t=t?n.clone(t):{};var e=this,r=t.success,i=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(n){(t.wait||e.isNew())&&i(),r&&r(e,n,t),e.isNew()||e.trigger("sync",e,n,t)},this.isNew())return t.success(),!1;M(this,t);var l=this.sync("delete",this,t);return t.wait||i(),l},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||U();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var r=this.validationError=this.validate(t,e)||null;return r?(this.trigger("invalid",this,r,n.extend(e,{validationError:r})),!1):!0}});var d=["keys","values","pairs","invert","pick","omit"];n.each(d,function(t){h.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.attributes),n[t].apply(n,e)}});var p=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},v={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};n.extend(p.prototype,u,{model:h,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,g))},remove:function(t,e){var r=!n.isArray(t);t=r?[t]:n.clone(t),e||(e={});var i,l,o,u;for(i=0,l=t.length;l>i;i++)u=t[i]=this.get(t[i]),u&&(delete this._byId[u.id],delete this._byId[u.cid],o=this.indexOf(u),this.models.splice(o,1),this.length--,e.silent||(e.index=o,u.trigger("remove",u,this,e)),this._removeReference(u,e));return r?t[0]:t},set:function(t,e){e=n.defaults({},e,v),e.parse&&(t=this.parse(t,e));var r=!n.isArray(t);t=r?t?[t]:[]:n.clone(t);var i,l,o,u,s,a,c,f=e.at,d=this.model,p=this.comparator&&null==f&&e.sort!==!1,g=n.isString(this.comparator)?this.comparator:null,m=[],y=[],b={},x=e.add,w=e.merge,k=e.remove,_=!p&&x&&k?[]:!1;for(i=0,l=t.length;l>i;i++){if(s=t[i]||{},o=s instanceof h?u=s:s[d.prototype.idAttribute||"id"],a=this.get(o))k&&(b[a.cid]=!0),w&&(s=s===u?u.attributes:s,e.parse&&(s=a.parse(s,e)),a.set(s,e),p&&!c&&a.hasChanged(g)&&(c=!0)),t[i]=a;else if(x){if(u=t[i]=this._prepareModel(s,e),!u)continue;m.push(u),this._addReference(u,e)}u=a||u,!_||!u.isNew()&&b[u.id]||_.push(u),b[u.id]=!0}if(k){for(i=0,l=this.length;l>i;++i)b[(u=this.models[i]).cid]||y.push(u);y.length&&this.remove(y,e)}if(m.length||_&&_.length)if(p&&(c=!0),this.length+=m.length,null!=f)for(i=0,l=m.length;l>i;i++)this.models.splice(f+i,0,m[i]);else{_&&(this.models.length=0);var E=_||m;for(i=0,l=E.length;l>i;i++)this.models.push(E[i])}if(c&&this.sort({silent:!0}),!e.silent){for(i=0,l=m.length;l>i;i++)(u=m[i]).trigger("add",u,this,e);(c||_&&_.length)&&this.trigger("sort",this,e)}return r?t[0]:t},reset:function(t,e){e||(e={});for(var r=0,i=this.models.length;i>r;r++)this._removeReference(this.models[r],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return o.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return n.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return n.invoke(this.models,"get",t)},fetch:function(t){t=t?n.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,r=this;return t.success=function(n){var i=t.reset?"reset":"set";r[i](n,t),e&&e(r,n,t),r.trigger("sync",r,n,t)},M(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?n.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var r=this,i=e.success;return e.success=function(t,n){e.wait&&r.add(t,e),i&&i(t,n,e)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof h)return t;e=e?n.clone(e):{},e.collection=this;var r=new this.model(t,e);return r.validationError?(this.trigger("invalid",this,r.validationError,e),!1):r},_addReference:function(t){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,r){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,r),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var m=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(m,function(t){p.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.models),n[t].apply(n,e)}});var y=["groupBy","countBy","sortBy","indexBy"];n.each(y,function(t){p.prototype[t]=function(e,r){var i=n.isFunction(e)?e:function(t){return t.get(e)};return n[t](this.models,i,r)}});var b=e.View=function(t){this.cid=n.uniqueId("view"),t||(t={}),n.extend(this,n.pick(t,w)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},x=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName","events"];n.extend(b.prototype,u,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,n){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=n.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var r=t[e];if(n.isFunction(r)||(r=this[t[e]]),r){var i=e.match(x),l=i[1],o=i[2];r=n.bind(r,this),l+=".delegateEvents"+this.cid,""===o?this.$el.on(l,r):this.$el.on(l,o,r)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t["class"]=n.result(this,"className"));var r=e.$("<"+n.result(this,"tagName")+">").attr(t);this.setElement(r,!1)}}}),e.sync=function(t,r,i){var l=_[t];n.defaults(i||(i={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var o={type:l,dataType:"json"};if(i.url||(o.url=n.result(r,"url")||U()),null!=i.data||!r||"create"!==t&&"update"!==t&&"patch"!==t||(o.contentType="application/json",o.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),i.emulateHTTP&&("PUT"===l||"DELETE"===l||"PATCH"===l)){o.type="POST",i.emulateJSON&&(o.data._method=l);var u=i.beforeSend;i.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",l),u?u.apply(this,arguments):void 0}}"GET"===o.type||i.emulateJSON||(o.processData=!1),"PATCH"===o.type&&k&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var s=i.xhr=e.ajax(n.extend(o,i));return r.trigger("request",r,s,i),s};var k=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),_={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var E=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},A=/\((.*?)\)/g,S=/(\(\?)?:\w+/g,C=/\*\w+/g,N=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(E.prototype,u,{initialize:function(){},route:function(t,r,i){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var l=this;return e.history.route(t,function(n){var o=l._extractParameters(t,n);l.execute(i,o),l.trigger.apply(l,["route:"+r].concat(o)),l.trigger("route",r,o),e.history.trigger("route",l,r,o)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(N,"\\$&").replace(A,"(?:$1)?").replace(S,function(t,e){return e?t:"([^/?]+)"}).replace(C,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var r=t.exec(e).slice(1);return n.map(r,function(t,e){return e===r.length-1?t||null:t?decodeURIComponent(t):null})}});var j=e.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},T=/^[#\/]|\s+$/g,O=/^\/+|\/+$/g,R=/msie [\w.]+/,F=/\/$/,$=/#.*$/;j.started=!1,n.extend(j.prototype,u,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(F,"");t.indexOf(n)||(t=t.slice(n.length))}else t=this.getHash();return t.replace(T,"")},start:function(t){if(j.started)throw new Error("Backbone.history has already been started");j.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),i=document.documentMode,l=R.exec(navigator.userAgent.toLowerCase())&&(!i||7>=i);if(this.root=("/"+this.root+"/").replace(O,"/"),l&&this._wantsHashChange){var o=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(r)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!l?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var u=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&u.hash&&(this.fragment=this.getHash().replace(T,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),j.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),n.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!j.started)return!1;e&&e!==!0||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(t=t.replace($,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else t.hash="#"+e}}),e.history=new j;var I=function(t,e){var r,i=this;r=t&&n.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},n.extend(r,i,e);var l=function(){this.constructor=r};return l.prototype=i.prototype,r.prototype=new l,t&&n.extend(r.prototype,t),r.__super__=i.prototype,r};h.extend=p.extend=E.extend=b.extend=j.extend=I;var U=function(){throw new Error('A "url" property or function must be specified')},M=function(t,e){var n=e.error;e.error=function(r){n&&n(t,r,e),t.trigger("error",t,r,e)}};return e})},{underscore:12}],3:[function(t,e){function n(){}var r=e.exports={};r.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=n,r.once=n,r.off=n,r.emit=n,r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")}},{}],4:[function(t,e,n){(function(t){function e(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,l=function(t){return i.exec(t).slice(1)};n.resolve=function(){for(var n="",i=!1,l=arguments.length-1;l>=-1&&!i;l--){var o=l>=0?arguments[l]:t.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(n=o+"/"+n,i="/"===o.charAt(0))}return n=e(r(n.split("/"),function(t){return!!t}),!i).join("/"),(i?"/":"")+n||"."},n.normalize=function(t){var i=n.isAbsolute(t),l="/"===o(t,-1);return t=e(r(t.split("/"),function(t){return!!t}),!i).join("/"),t||i||(t="."),t&&l&&(t+="/"),(i?"/":"")+t},n.isAbsolute=function(t){return"/"===t.charAt(0)},n.join=function(){var t=Array.prototype.slice.call(arguments,0);return n.normalize(r(t,function(t){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},n.relative=function(t,e){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=n.resolve(t).substr(1),e=n.resolve(e).substr(1);for(var i=r(t.split("/")),l=r(e.split("/")),o=Math.min(i.length,l.length),u=o,s=0;o>s;s++)if(i[s]!==l[s]){u=s;break}for(var a=[],s=u;s<i.length;s++)a.push("..");return a=a.concat(l.slice(u)),a.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(t){var e=l(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},n.basename=function(t,e){var n=l(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},n.extname=function(t){return l(t)[3]};var o="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return 0>e&&(e=t.length+e),t.substr(e,n)}}).call(this,t("/Users/Hashan/Dropbox/Sites/Styles53/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"/Users/Hashan/Dropbox/Sites/Styles53/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":3}],5:[function(require,module,exports){function Context(){}var indexOf=require("indexof"),Object_keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)e.push(n);return e},forEach=function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n,t)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(t,e,n){Object.defineProperty(t,e,{writable:!0,enumerable:!1,configurable:!0,value:n})}}catch(t){return function(t,e,n){t[e]=n}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];Context.prototype={};var Script=exports.Script=function(t){return this instanceof Script?void(this.code=t):new Script(t)};Script.prototype.runInContext=function(t){if(!(t instanceof Context))throw new TypeError("needs a 'context' argument.");var e=document.createElement("iframe");e.style||(e.style={}),e.style.display="none",document.body.appendChild(e);var n=e.contentWindow,r=n.eval,i=n.execScript;!r&&i&&(i.call(n,"null"),r=n.eval),forEach(Object_keys(t),function(e){n[e]=t[e]}),forEach(globals,function(e){t[e]&&(n[e]=t[e])});var l=Object_keys(n),o=r.call(n,this.code);return forEach(Object_keys(n),function(e){(e in t||-1===indexOf(l,e))&&(t[e]=n[e])}),forEach(globals,function(e){e in t||defineProp(t,e,n[e])}),document.body.removeChild(e),o},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(t){var e=Script.createContext(t),n=this.runInContext(e);return forEach(Object_keys(e),function(n){t[n]=e[n]}),n},forEach(Object_keys(Script.prototype),function(t){exports[t]=Script[t]=function(e){var n=Script(e);return n[t].apply(n,[].slice.call(arguments,1))}}),exports.createScript=function(t){return exports.Script(t)},exports.createContext=Script.createContext=function(t){var e=new Context;return"object"==typeof t&&forEach(Object_keys(t),function(n){e[n]=t[n]}),e}},{indexof:6}],6:[function(t,e){var n=[].indexOf;e.exports=function(t,e){if(n)return t.indexOf(e);for(var r=0;r<t.length;++r)if(t[r]===e)return r;return-1}},{}],7:[function(require,module,exports){!function(dust){function isSelect(t){var e=t.current();return"object"==typeof e&&e.isSelect===!0}function jsonFilter(t,e){return"function"==typeof e?e.toString():e}function filter(t,e,n,r,i){r=r||{};var l,o,u=n.block,s=r.filterOpType||"";if("undefined"!=typeof r.key)l=dust.helpers.tap(r.key,t,e);else{if(!isSelect(e))return _console.log("No key specified for filter in:"+s+" helper "),t;l=e.current().selectKey,e.current().isResolved&&(i=function(){return!1})}return o=dust.helpers.tap(r.value,t,e),i(coerce(o,r.type,e),coerce(l,r.type,e))?(isSelect(e)&&(e.current().isResolved=!0),u?t.render(u,e):(_console.log("Missing body block in the "+s+" helper "),t)):n["else"]?t.render(n["else"],e):t}function coerce(t,e,n){if(t)switch(e||typeof t){case"number":return+t;case"string":return String(t);case"boolean":return t="false"===t?!1:t,Boolean(t);case"date":return new Date(t);case"context":return n.get(t)}return t}var _console="undefined"!=typeof console?console:{log:function(){}},helpers={tap:function(t,e,n){var r=t;return"function"==typeof t&&(t.isFunction===!0?r=t():(r="",e.tap(function(t){return r+=t,""}).render(t,n).untap(),""===r&&(r=!1))),r},sep:function(t,e,n){var r=n.block;return e.stack.index===e.stack.of-1?t:r?n.block(t,e):t},idx:function(t,e,n){var r=n.block;return r?n.block(t,e.push(e.stack.index)):t},contextDump:function(t,e,n,r){var i,l=r||{},o=l.to||"output",u=l.key||"current";return o=dust.helpers.tap(o,t,e),u=dust.helpers.tap(u,t,e),i="full"===u?JSON.stringify(e.stack,jsonFilter,2):JSON.stringify(e.stack.head,jsonFilter,2),"console"===o?(_console.log(i),t):t.write(i)},"if":function(chunk,context,bodies,params){var body=bodies.block,skip=bodies["else"];if(params&&params.cond){var cond=params.cond;if(cond=dust.helpers.tap(cond,chunk,context),eval(cond))return body?chunk.render(bodies.block,context):(_console.log("Missing body block in the if helper!"),chunk);if(skip)return chunk.render(bodies["else"],context)}else _console.log("No condition given in the if helper!");return chunk},math:function(t,e,n,r){if(r&&"undefined"!=typeof r.key&&r.method){var i=r.key,l=r.method,o=r.operand,u=r.round,s=null;switch(i=dust.helpers.tap(i,t,e),o=dust.helpers.tap(o,t,e),l){case"mod":(0===o||o===-0)&&_console.log("operand for divide operation is 0/-0: expect Nan!"),s=parseFloat(i)%parseFloat(o);break;case"add":s=parseFloat(i)+parseFloat(o);break;case"subtract":s=parseFloat(i)-parseFloat(o);break;case"multiply":s=parseFloat(i)*parseFloat(o);break;case"divide":(0===o||o===-0)&&_console.log("operand for divide operation is 0/-0: expect Nan/Infinity!"),s=parseFloat(i)/parseFloat(o);break;case"ceil":s=Math.ceil(parseFloat(i));break;case"floor":s=Math.floor(parseFloat(i));break;case"round":s=Math.round(parseFloat(i));break;case"abs":s=Math.abs(parseFloat(i));break;default:_console.log("method passed is not supported")}return null!==s?(u&&(s=Math.round(s)),n&&n.block?t.render(n.block,e.push({isSelect:!0,isResolved:!1,selectKey:s})):t.write(s)):t}return _console.log("Key is a required parameter for math helper along with method/operand!"),t},select:function(t,e,n,r){var i=n.block;if(r&&"undefined"!=typeof r.key){var l=dust.helpers.tap(r.key,t,e);return i?t.render(n.block,e.push({isSelect:!0,isResolved:!1,selectKey:l})):(_console.log("Missing body block in the select helper "),t)}return _console.log("No key given in the select helper!"),t},eq:function(t,e,n,r){return r&&(r.filterOpType="eq"),filter(t,e,n,r,function(t,e){return e===t})},ne:function(t,e,n,r){return r?(r.filterOpType="ne",filter(t,e,n,r,function(t,e){return e!==t})):t},lt:function(t,e,n,r){return r?(r.filterOpType="lt",filter(t,e,n,r,function(t,e){return t>e})):void 0},lte:function(t,e,n,r){return r?(r.filterOpType="lte",filter(t,e,n,r,function(t,e){return t>=e})):t},gt:function(t,e,n,r){return r?(r.filterOpType="gt",filter(t,e,n,r,function(t,e){return e>t})):t},gte:function(t,e,n,r){return r?(r.filterOpType="gte",filter(t,e,n,r,function(t,e){return e>=t})):t},"default":function(t,e,n,r){return r&&(r.filterOpType="default"),filter(t,e,n,r,function(){return!0})},size:function(t,e,n,r){var i,l,o,u=0;if(r=r||{},i=r.key,i&&i!==!0)if(dust.isArray(i))u=i.length;else if(!isNaN(parseFloat(i))&&isFinite(i))u=i;else if("object"==typeof i){l=0;for(o in i)Object.hasOwnProperty.call(i,o)&&l++;u=l}else u=(i+"").length;else u=0;return t.write(u)}};dust.helpers=helpers}("undefined"!=typeof exports?module.exports=require("dustjs-linkedin"):dust)},{"dustjs-linkedin":9}],8:[function(t,e,n){var r=function(t){function e(e){var n={};return t.filterNode(n,e)
}function n(e,n){var r,i,l,o=[n[0]];for(r=1,i=n.length;i>r;r++)l=t.filterNode(e,n[r]),l&&o.push(l);return o}function r(e,n){var r,i,l,o,u=[n[0]];for(i=1,l=n.length;l>i;i++)o=t.filterNode(e,n[i]),o&&("buffer"===o[0]?r?r[1]+=o[1]:(r=o,u.push(o)):(r=null,u.push(o)));return u}function i(t,e){return["buffer",h[e[1]]]}function l(t,e){return e}function o(){}function u(e,n){var r={name:n,bodies:[],blocks:{},index:0,auto:"h"};return"(function(){dust.register("+(n?'"'+n+'"':"null")+","+t.compileNode(r,e)+");"+s(r)+a(r)+"return body_0;})();"}function s(t){var e,n=[],r=t.blocks;for(e in r)n.push("'"+e+"':"+r[e]);return n.length?(t.blocks="ctx=ctx.shiftBlocks(blocks);","var blocks={"+n.join(",")+"};"):t.blocks=""}function a(t){var e,n,r=[],i=t.bodies,l=t.blocks;for(e=0,n=i.length;n>e;e++)r[e]="function body_"+e+"(chk,ctx){"+l+"return chk"+i[e]+";}";return r.join("")}function c(e,n){var r,i,l="";for(r=1,i=n.length;i>r;r++)l+=t.compileNode(e,n[r]);return l}function f(e,n,r){return"."+r+"("+t.compileNode(e,n[1])+","+t.compileNode(e,n[2])+","+t.compileNode(e,n[4])+","+t.compileNode(e,n[3])+")"}t.compile=function(n,r){try{var i=e(t.parse(n));return u(i,r)}catch(l){if(!l.line||!l.column)throw l;throw new SyntaxError(l.message+" At line : "+l.line+", column : "+l.column)}},t.filterNode=function(e,n){return t.optimizers[n[0]](e,n)},t.optimizers={body:r,buffer:l,special:i,format:o,reference:n,"#":n,"?":n,"^":n,"<":n,"+":n,"@":n,"%":n,partial:n,context:n,params:n,bodies:n,param:n,filters:l,key:l,path:l,literal:l,comment:o,line:o,col:o},t.pragmas={esc:function(t,e,n){var r,i=t.auto;return e||(e="h"),t.auto="s"===e?"":e,r=c(t,n.block),t.auto=i,r}};var h={s:" ",n:"\n",r:"\r",lb:"{",rb:"}"};t.compileNode=function(e,n){return t.nodes[n[0]](e,n)},t.nodes={body:function(t,e){var n=t.index++,r="body_"+n;return t.bodies[n]=c(t,e),r},buffer:function(t,e){return".write("+d(e[1])+")"},format:function(t,e){return".write("+d(e[1]+e[2])+")"},reference:function(e,n){return".reference("+t.compileNode(e,n[1])+",ctx,"+t.compileNode(e,n[2])+")"},"#":function(t,e){return f(t,e,"section")},"?":function(t,e){return f(t,e,"exists")},"^":function(t,e){return f(t,e,"notexists")},"<":function(e,n){for(var r=n[4],i=1,l=r.length;l>i;i++){var o=r[i],u=o[1][1];if("block"===u)return e.blocks[n[1].text]=t.compileNode(e,o[2]),""}return""},"+":function(e,n){return"undefined"==typeof n[1].text&&"undefined"==typeof n[4]?".block(ctx.getBlock("+t.compileNode(e,n[1])+",chk, ctx),"+t.compileNode(e,n[2])+", {},"+t.compileNode(e,n[3])+")":".block(ctx.getBlock("+d(n[1].text)+"),"+t.compileNode(e,n[2])+","+t.compileNode(e,n[4])+","+t.compileNode(e,n[3])+")"},"@":function(e,n){return".helper("+d(n[1].text)+","+t.compileNode(e,n[2])+","+t.compileNode(e,n[4])+","+t.compileNode(e,n[3])+")"},"%":function(e,n){var r=n[1][1];if(!t.pragmas[r])return"";for(var i=n[4],l={},o=1,u=i.length;u>o;o++){var s=i[o];l[s[1][1]]=s[2]}for(var a=n[3],c={},o=1,u=a.length;u>o;o++){var f=a[o];c[f[1][1]]=f[2][1]}var h=n[2][1]?n[2][1].text:null;return t.pragmas[r](e,h,l,c)},partial:function(e,n){return".partial("+t.compileNode(e,n[1])+","+t.compileNode(e,n[2])+","+t.compileNode(e,n[3])+")"},context:function(e,n){return n[1]?"ctx.rebase("+t.compileNode(e,n[1])+")":"ctx"},params:function(e,n){for(var r=[],i=1,l=n.length;l>i;i++)r.push(t.compileNode(e,n[i]));return r.length?"{"+r.join(",")+"}":"null"},bodies:function(e,n){for(var r=[],i=1,l=n.length;l>i;i++)r.push(t.compileNode(e,n[i]));return"{"+r.join(",")+"}"},param:function(e,n){return t.compileNode(e,n[1])+":"+t.compileNode(e,n[2])},filters:function(t,e){for(var n=[],r=1,i=e.length;i>r;r++){var l=e[r];n.push('"'+l+'"')}return'"'+t.auto+'"'+(n.length?",["+n.join(",")+"]":"")},key:function(t,e){return'ctx._get(false, ["'+e[1]+'"])'},path:function(e,n){for(var r=n[1],i=n[2],l=[],o=0,u=i.length;u>o;o++)l.push(t.isArray(i[o])?t.compileNode(e,i[o]):'"'+i[o]+'"');return"ctx._get("+r+",["+l.join(",")+"])"},literal:function(t,e){return d(e[1])}};var d="undefined"==typeof JSON?function(e){return'"'+t.escapeJs(e)+'"'}:JSON.stringify;return t};"undefined"!=typeof n?e.exports=r:r(getGlobal())},{}],9:[function(require,module,exports){(function(process){function getGlobal(){return function(){return this.dust}.call(null)}var dust={};!function(dust){function Context(t,e,n,r){this.stack=t,this.global=e,this.blocks=n,this.templateName=r}function Stack(t,e,n,r){this.tail=e,this.isObject=t&&"object"==typeof t,this.head=t,this.index=n,this.of=r}function Stub(t){this.head=new Chunk(this),this.callback=t,this.out=""}function Stream(){this.head=new Chunk(this)}function Chunk(t,e,n){this.root=t,this.next=e,this.data=[],this.flushable=!1,this.taps=n}function Tap(t,e){this.head=t,this.tail=e}if(dust){var ERROR="ERROR",WARN="WARN",INFO="INFO",DEBUG="DEBUG",levels=[DEBUG,INFO,WARN,ERROR],logger=function(){};dust.isDebug=!1,dust.debugLevel=INFO,"undefined"!=typeof window&&window&&window.console&&window.console.log?logger=window.console.log:"undefined"!=typeof console&&console&&console.log&&(logger=console.log),dust.log=function(t,e){var e=e||INFO;dust.isDebug&&levels.indexOf(e)>=levels.indexOf(dust.debugLevel)&&(dust.logQueue||(dust.logQueue=[]),dust.logQueue.push({message:t,type:e}),logger.call(console||window.console,"[DUST "+e+"]: "+t))},dust.onError=function(t,e){if(dust.log(t.message||t,ERROR),dust.isDebug)throw t;return e},dust.helpers={},dust.cache={},dust.register=function(t,e){t&&(dust.cache[t]=e)},dust.render=function(t,e,n){var r=new Stub(n).head;try{dust.load(t,r,Context.wrap(e,t)).end()}catch(i){dust.onError(i,r)}},dust.stream=function(t,e){var n=new Stream;return dust.nextTick(function(){try{dust.load(t,n.head,Context.wrap(e,t)).end()}catch(r){dust.onError(r,n.head)}}),n},dust.renderSource=function(t,e,n){return dust.compileFn(t)(e,n)},dust.compileFn=function(t,e){var n=dust.loadSource(dust.compile(t,e));return function(t,r){var i=r?new Stub(r):new Stream;return dust.nextTick(function(){"function"==typeof n?n(i.head,Context.wrap(t,e)).end():dust.onError(new Error("Template ["+e+"] cannot be resolved to a Dust function"))}),i}},dust.load=function(t,e,n){var r=dust.cache[t];return r?r(e,n):dust.onLoad?e.map(function(e){dust.onLoad(t,function(r,i){return r?e.setError(r):(dust.cache[t]||dust.loadSource(dust.compile(i,t)),void dust.cache[t](e,n).end())})}):e.setError(new Error("Template Not Found: "+t))},dust.loadSource=function(source,path){return eval(source)},dust.isArray=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},dust.nextTick=function(){return"undefined"!=typeof process?process.nextTick:function(t){setTimeout(t,0)}}(),dust.isEmpty=function(t){return dust.isArray(t)&&!t.length?!0:0===t?!1:!t},dust.filter=function(t,e,n){if(n)for(var r=0,i=n.length;i>r;r++){var l=n[r];"s"===l?(e=null,dust.log("Using unescape filter on ["+t+"]",DEBUG)):"function"==typeof dust.filters[l]?t=dust.filters[l](t):dust.onError(new Error("Invalid filter ["+l+"]"))}return e&&(t=dust.filters[e](t)),t},dust.filters={h:function(t){return dust.escapeHtml(t)},j:function(t){return dust.escapeJs(t)},u:encodeURI,uc:encodeURIComponent,js:function(t){return JSON?JSON.stringify(t):(dust.log("JSON is undefined.  JSON stringify has not been used on ["+t+"]",WARN),t)},jp:function(t){return JSON?JSON.parse(t):(dust.log("JSON is undefined.  JSON parse has not been used on ["+t+"]",WARN),t)}},dust.makeBase=function(t){return new Context(new Stack,t)},Context.wrap=function(t,e){return t instanceof Context?t:new Context(new Stack(t),{},null,e)},Context.prototype.get=function(t,e){return"string"==typeof t&&("."===t[0]&&(e=!0,t=t.substr(1)),t=t.split(".")),this._get(e,t)},Context.prototype._get=function(t,e){var n,r,i,l,o=this.stack,u=1;if(dust.log("Searching for reference [{"+e.join(".")+"}] in template ["+this.getTemplateName()+"]",DEBUG),r=e[0],i=e.length,t&&0===i)l=o,o=o.head;else{if(t)o=o.head[r];else{for(;o&&(!o.isObject||(l=o.head,n=o.head[r],void 0===n));)o=o.tail;o=void 0!==n?n:this.global?this.global[r]:void 0}for(;o&&i>u;)l=o,o=o[e[u]],u++}if("function"==typeof o){var s=function(){return o.apply(l,arguments)};return s.isFunction=!0,s}return void 0===o&&dust.log("Cannot find the value for reference [{"+e.join(".")+"}] in template ["+this.getTemplateName()+"]"),o},Context.prototype.getPath=function(t,e){return this._get(t,e)},Context.prototype.push=function(t,e,n){return new Context(new Stack(t,this.stack,e,n),this.global,this.blocks,this.getTemplateName())},Context.prototype.rebase=function(t){return new Context(new Stack(t),this.global,this.blocks,this.getTemplateName())},Context.prototype.current=function(){return this.stack.head},Context.prototype.getBlock=function(t){if("function"==typeof t){var e=new Chunk;t=t(e,this).data.join("")}var n=this.blocks;if(!n)return void dust.log("No blocks for context[{"+t+"}] in template ["+this.getTemplateName()+"]",DEBUG);for(var r,i=n.length;i--;)if(r=n[i][t])return r},Context.prototype.shiftBlocks=function(t){var e,n=this.blocks;return t?(e=n?n.concat([t]):[t],new Context(this.stack,this.global,e,this.getTemplateName())):this},Context.prototype.getTemplateName=function(){return this.templateName},Stub.prototype.flush=function(){for(var t=this.head;t;){if(!t.flushable)return t.error?(this.callback(t.error),dust.onError(new Error("Chunk error ["+t.error+"] thrown. Ceasing to render this template.")),void(this.flush=function(){})):void 0;this.out+=t.data.join(""),t=t.next,this.head=t}this.callback(null,this.out)},Stream.prototype.flush=function(){for(var t=this.head;t;){if(!t.flushable)return t.error?(this.emit("error",t.error),dust.onError(new Error("Chunk error ["+t.error+"] thrown. Ceasing to render this template.")),void(this.flush=function(){})):void 0;this.emit("data",t.data.join("")),t=t.next,this.head=t}this.emit("end")},Stream.prototype.emit=function(t,e){if(!this.events)return dust.log("No events to emit",INFO),!1;var n=this.events[t];if(!n)return dust.log("Event type ["+t+"] does not exist",WARN),!1;if("function"==typeof n)n(e);else if(dust.isArray(n))for(var r=n.slice(0),i=0,l=r.length;l>i;i++)r[i](e);else dust.onError(new Error("Event Handler ["+n+"] is not of a type that is handled by emit"))},Stream.prototype.on=function(t,e){return this.events||(this.events={}),this.events[t]?"function"==typeof this.events[t]?this.events[t]=[this.events[t],e]:this.events[t].push(e):(dust.log("Event type ["+t+"] does not exist. Using just the specified callback.",WARN),e?this.events[t]=e:dust.log("Callback for type ["+t+"] does not exist. Listener not registered.",WARN)),this},Stream.prototype.pipe=function(t){return this.on("data",function(e){try{t.write(e,"utf8")}catch(n){dust.onError(n,t.head)}}).on("end",function(){try{return t.end()}catch(e){dust.onError(e,t.head)}}).on("error",function(e){t.error(e)}),this},Chunk.prototype.write=function(t){var e=this.taps;return e&&(t=e.go(t)),this.data.push(t),this},Chunk.prototype.end=function(t){return t&&this.write(t),this.flushable=!0,this.root.flush(),this},Chunk.prototype.map=function(t){var e=new Chunk(this.root,this.next,this.taps),n=new Chunk(this.root,e,this.taps);return this.next=n,this.flushable=!0,t(n),e},Chunk.prototype.tap=function(t){var e=this.taps;return this.taps=e?e.push(t):new Tap(t),this},Chunk.prototype.untap=function(){return this.taps=this.taps.tail,this},Chunk.prototype.render=function(t,e){return t(this,e)},Chunk.prototype.reference=function(t,e,n,r){return"function"==typeof t&&(t.isFunction=!0,t=t.apply(e.current(),[this,e,null,{auto:n,filters:r}]),t instanceof Chunk)?t:dust.isEmpty(t)?this:this.write(dust.filter(t,n,r))},Chunk.prototype.section=function(t,e,n,r){if("function"==typeof t&&(t=t.apply(e.current(),[this,e,n,r]),t instanceof Chunk))return t;var i=n.block,l=n["else"];if(r&&(e=e.push(r)),dust.isArray(t)){if(i){var o=t.length,u=this;if(o>0){e.stack.head&&(e.stack.head.$len=o);for(var s=0;o>s;s++)e.stack.head&&(e.stack.head.$idx=s),u=i(u,e.push(t[s],s,o));return e.stack.head&&(e.stack.head.$idx=void 0,e.stack.head.$len=void 0),u}if(l)return l(this,e)}}else if(t===!0){if(i)return i(this,e)}else if(t||0===t){if(i)return i(this,e.push(t))}else if(l)return l(this,e);return dust.log("Not rendering section (#) block in template ["+e.getTemplateName()+"], because above key was not found",DEBUG),this},Chunk.prototype.exists=function(t,e,n){var r=n.block,i=n["else"];if(dust.isEmpty(t)){if(i)return i(this,e)}else if(r)return r(this,e);return dust.log("Not rendering exists (?) block in template ["+e.getTemplateName()+"], because above key was not found",DEBUG),this},Chunk.prototype.notexists=function(t,e,n){var r=n.block,i=n["else"];if(dust.isEmpty(t)){if(r)return r(this,e)}else if(i)return i(this,e);return dust.log("Not rendering not exists (^) block check in template ["+e.getTemplateName()+"], because above key was found",DEBUG),this},Chunk.prototype.block=function(t,e,n){var r=n.block;return t&&(r=t),r?r(this,e):this},Chunk.prototype.partial=function(t,e,n){var r;r=dust.makeBase(e.global),r.blocks=e.blocks,e.stack&&e.stack.tail&&(r.stack=e.stack.tail),n&&(r=r.push(n)),"string"==typeof t&&(r.templateName=t),r=r.push(e.stack.head);var i;return i="function"==typeof t?this.capture(t,r,function(t,e){r.templateName=r.templateName||t,dust.load(t,e,r).end()}):dust.load(t,this,r)},Chunk.prototype.helper=function(t,e,n,r){var i=this;try{return dust.helpers[t]?dust.helpers[t](i,e,n,r):dust.onError(new Error("Invalid helper ["+t+"]"),i)}catch(l){return dust.onError(l,i)}},Chunk.prototype.capture=function(t,e,n){return this.map(function(r){var i=new Stub(function(t,e){t?r.setError(t):n(e,r)});t(i.head,e).end()})},Chunk.prototype.setError=function(t){return this.error=t,this.root.flush(),this},Tap.prototype.push=function(t){return new Tap(t,this)},Tap.prototype.go=function(t){for(var e=this;e;)t=e.head(t),e=e.tail;return t};var HCHARS=new RegExp(/[&<>\"\']/),AMP=/&/g,LT=/</g,GT=/>/g,QUOT=/\"/g,SQUOT=/\'/g;dust.escapeHtml=function(t){return"string"==typeof t&&HCHARS.test(t)?t.replace(AMP,"&amp;").replace(LT,"&lt;").replace(GT,"&gt;").replace(QUOT,"&quot;").replace(SQUOT,"&#39;"):t};var BS=/\\/g,FS=/\//g,CR=/\r/g,LS=/\u2028/g,PS=/\u2029/g,NL=/\n/g,LF=/\f/g,SQ=/'/g,DQ=/"/g,TB=/\t/g;dust.escapeJs=function(t){return"string"==typeof t?t.replace(BS,"\\\\").replace(FS,"\\/").replace(DQ,'\\"').replace(SQ,"\\'").replace(CR,"\\r").replace(LS,"\\u2028").replace(PS,"\\u2029").replace(NL,"\\n").replace(LF,"\\f").replace(TB,"\\t"):t}}}(dust),"undefined"!=typeof exports&&("undefined"!=typeof process&&require("./server")(dust),module.exports=dust)}).call(this,require("/Users/Hashan/Dropbox/Sites/Styles53/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"./server":11,"/Users/Hashan/Dropbox/Sites/Styles53/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":3}],10:[function(t,e,n){!function(t){var e=function(){function t(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var n={parse:function(n,r){function i(t){var e={};for(var n in t)e[n]=t[n];return e}function l(t,e){for(var r=t.offset+e,i=t.offset;r>i;i++){var l=n.charAt(i);"\n"===l?(t.seenCR||t.line++,t.column=1,t.seenCR=!1):"\r"===l||"\u2028"===l||"\u2029"===l?(t.line++,t.column=1,t.seenCR=!0):(t.column++,t.seenCR=!1)}t.offset+=e}function o(t){D.offset<J.offset||(D.offset>J.offset&&(J=i(D),L=[]),L.push(t))}function u(){var t,e,n;for(n=i(D),t=[],e=s();null!==e;)t.push(e),e=s();return null!==t&&(t=function(t,e,n,r){return["body"].concat(r).concat([["line",e],["col",n]])}(n.offset,n.line,n.column,t)),null===t&&(D=i(n)),t}function s(){var t;return t=R(),null===t&&(t=a(),null===t&&(t=g(),null===t&&(t=y(),null===t&&(t=v(),null===t&&(t=j()))))),t}function a(){var t,e,r,s,a,h,d,v,g;if(z++,v=i(D),g=i(D),t=c(),null!==t){for(e=[],r=B();null!==r;)e.push(r),r=B();null!==e?(r=I(),null!==r?(s=u(),null!==s?(a=p(),null!==a?(h=f(),h=null!==h?h:"",null!==h?(d=function(t,e,n,r,i,l,o){if(!o||r[1].text!==o.text)throw new Error("Expected end tag for "+r[1].text+" but it was not found. At line : "+e+", column : "+n);return!0}(D.offset,D.line,D.column,t,s,a,h)?"":null,null!==d?t=[t,e,r,s,a,h,d]:(t=null,D=i(g))):(t=null,D=i(g))):(t=null,D=i(g))):(t=null,D=i(g))):(t=null,D=i(g))):(t=null,D=i(g))}else t=null,D=i(g);if(null!==t&&(t=function(t,e,n,r,i,l){return l.push(["param",["literal","block"],i]),r.push(l),r.concat([["line",e],["col",n]])}(v.offset,v.line,v.column,t[0],t[3],t[4],t[5])),null===t&&(D=i(v)),null===t){if(v=i(D),g=i(D),t=c(),null!==t){for(e=[],r=B();null!==r;)e.push(r),r=B();null!==e?(47===n.charCodeAt(D.offset)?(r="/",l(D,1)):(r=null,0===z&&o('"/"')),null!==r?(s=I(),null!==s?t=[t,e,r,s]:(t=null,D=i(g))):(t=null,D=i(g))):(t=null,D=i(g))}else t=null,D=i(g);null!==t&&(t=function(t,e,n,r){return r.push(["bodies"]),r.concat([["line",e],["col",n]])}(v.offset,v.line,v.column,t[0])),null===t&&(D=i(v))}return z--,0===z&&null===t&&o("section"),t}function c(){var t,e,r,u,s,a,c,f;if(c=i(D),f=i(D),t=$(),null!==t)if(/^[#?^<+@%]/.test(n.charAt(D.offset))?(e=n.charAt(D.offset),l(D,1)):(e=null,0===z&&o("[#?^<+@%]")),null!==e){for(r=[],u=B();null!==u;)r.push(u),u=B();null!==r?(u=b(),null!==u?(s=h(),null!==s?(a=d(),null!==a?t=[t,e,r,u,s,a]:(t=null,D=i(f))):(t=null,D=i(f))):(t=null,D=i(f))):(t=null,D=i(f))}else t=null,D=i(f);else t=null,D=i(f);return null!==t&&(t=function(t,e,n,r,i,l,o){return[r,i,l,o]}(c.offset,c.line,c.column,t[1],t[3],t[4],t[5])),null===t&&(D=i(c)),t}function f(){var t,e,r,u,s,a,c,f;if(z++,c=i(D),f=i(D),t=$(),null!==t)if(47===n.charCodeAt(D.offset)?(e="/",l(D,1)):(e=null,0===z&&o('"/"')),null!==e){for(r=[],u=B();null!==u;)r.push(u),u=B();if(null!==r)if(u=b(),null!==u){for(s=[],a=B();null!==a;)s.push(a),a=B();null!==s?(a=I(),null!==a?t=[t,e,r,u,s,a]:(t=null,D=i(f))):(t=null,D=i(f))}else t=null,D=i(f);else t=null,D=i(f)}else t=null,D=i(f);else t=null,D=i(f);return null!==t&&(t=function(t,e,n,r){return r}(c.offset,c.line,c.column,t[3])),null===t&&(D=i(c)),z--,0===z&&null===t&&o("end tag"),t}function h(){var t,e,r,u,s;return r=i(D),u=i(D),s=i(D),58===n.charCodeAt(D.offset)?(t=":",l(D,1)):(t=null,0===z&&o('":"')),null!==t?(e=b(),null!==e?t=[t,e]:(t=null,D=i(s))):(t=null,D=i(s)),null!==t&&(t=function(t,e,n,r){return r}(u.offset,u.line,u.column,t[1])),null===t&&(D=i(u)),t=null!==t?t:"",null!==t&&(t=function(t,e,n,r){return r?["context",r]:["context"]}(r.offset,r.line,r.column,t)),null===t&&(D=i(r)),t}function d(){var t,e,r,u,s,a,c,f;if(z++,a=i(D),t=[],c=i(D),f=i(D),r=B(),null!==r)for(e=[];null!==r;)e.push(r),r=B();else e=null;for(null!==e?(r=E(),null!==r?(61===n.charCodeAt(D.offset)?(u="=",l(D,1)):(u=null,0===z&&o('"="')),null!==u?(s=x(),null===s&&(s=b(),null===s&&(s=C())),null!==s?e=[e,r,u,s]:(e=null,D=i(f))):(e=null,D=i(f))):(e=null,D=i(f))):(e=null,D=i(f)),null!==e&&(e=function(t,e,n,r,i){return["param",["literal",r],i]}(c.offset,c.line,c.column,e[1],e[3])),null===e&&(D=i(c));null!==e;){if(t.push(e),c=i(D),f=i(D),r=B(),null!==r)for(e=[];null!==r;)e.push(r),r=B();else e=null;null!==e?(r=E(),null!==r?(61===n.charCodeAt(D.offset)?(u="=",l(D,1)):(u=null,0===z&&o('"="')),null!==u?(s=x(),null===s&&(s=b(),null===s&&(s=C())),null!==s?e=[e,r,u,s]:(e=null,D=i(f))):(e=null,D=i(f))):(e=null,D=i(f))):(e=null,D=i(f)),null!==e&&(e=function(t,e,n,r,i){return["param",["literal",r],i]}(c.offset,c.line,c.column,e[1],e[3])),null===e&&(D=i(c))}return null!==t&&(t=function(t,e,n,r){return["params"].concat(r)}(a.offset,a.line,a.column,t)),null===t&&(D=i(a)),z--,0===z&&null===t&&o("params"),t}function p(){var t,e,r,s,a,c,f,h,d;for(z++,f=i(D),t=[],h=i(D),d=i(D),e=$(),null!==e?(58===n.charCodeAt(D.offset)?(r=":",l(D,1)):(r=null,0===z&&o('":"')),null!==r?(s=E(),null!==s?(a=I(),null!==a?(c=u(),null!==c?e=[e,r,s,a,c]:(e=null,D=i(d))):(e=null,D=i(d))):(e=null,D=i(d))):(e=null,D=i(d))):(e=null,D=i(d)),null!==e&&(e=function(t,e,n,r,i){return["param",["literal",r],i]}(h.offset,h.line,h.column,e[2],e[4])),null===e&&(D=i(h));null!==e;)t.push(e),h=i(D),d=i(D),e=$(),null!==e?(58===n.charCodeAt(D.offset)?(r=":",l(D,1)):(r=null,0===z&&o('":"')),null!==r?(s=E(),null!==s?(a=I(),null!==a?(c=u(),null!==c?e=[e,r,s,a,c]:(e=null,D=i(d))):(e=null,D=i(d))):(e=null,D=i(d))):(e=null,D=i(d))):(e=null,D=i(d)),null!==e&&(e=function(t,e,n,r,i){return["param",["literal",r],i]}(h.offset,h.line,h.column,e[2],e[4])),null===e&&(D=i(h));return null!==t&&(t=function(t,e,n,r){return["bodies"].concat(r)}(f.offset,f.line,f.column,t)),null===t&&(D=i(f)),z--,0===z&&null===t&&o("bodies"),t}function v(){var t,e,n,r,l,u;return z++,l=i(D),u=i(D),t=$(),null!==t?(e=b(),null!==e?(n=m(),null!==n?(r=I(),null!==r?t=[t,e,n,r]:(t=null,D=i(u))):(t=null,D=i(u))):(t=null,D=i(u))):(t=null,D=i(u)),null!==t&&(t=function(t,e,n,r,i){return["reference",r,i].concat([["line",e],["col",n]])}(l.offset,l.line,l.column,t[1],t[2])),null===t&&(D=i(l)),z--,0===z&&null===t&&o("reference"),t}function g(){var t,e,r,u,s,a,c,f,p,v,g,m;if(z++,v=i(D),g=i(D),t=$(),null!==t)if(62===n.charCodeAt(D.offset)?(e=">",l(D,1)):(e=null,0===z&&o('">"')),null===e&&(43===n.charCodeAt(D.offset)?(e="+",l(D,1)):(e=null,0===z&&o('"+"'))),null!==e){for(r=[],u=B();null!==u;)r.push(u),u=B();if(null!==r)if(m=i(D),u=E(),null!==u&&(u=function(t,e,n,r){return["literal",r]}(m.offset,m.line,m.column,u)),null===u&&(D=i(m)),null===u&&(u=C()),null!==u)if(s=h(),null!==s)if(a=d(),null!==a){for(c=[],f=B();null!==f;)c.push(f),f=B();null!==c?(47===n.charCodeAt(D.offset)?(f="/",l(D,1)):(f=null,0===z&&o('"/"')),null!==f?(p=I(),null!==p?t=[t,e,r,u,s,a,c,f,p]:(t=null,D=i(g))):(t=null,D=i(g))):(t=null,D=i(g))}else t=null,D=i(g);else t=null,D=i(g);else t=null,D=i(g);else t=null,D=i(g)}else t=null,D=i(g);else t=null,D=i(g);return null!==t&&(t=function(t,e,n,r,i,l,o){var u=">"===r?"partial":r;return[u,i,l,o].concat([["line",e],["col",n]])}(v.offset,v.line,v.column,t[1],t[3],t[4],t[5])),null===t&&(D=i(v)),z--,0===z&&null===t&&o("partial"),t}function m(){var t,e,r,u,s,a;for(z++,u=i(D),t=[],s=i(D),a=i(D),124===n.charCodeAt(D.offset)?(e="|",l(D,1)):(e=null,0===z&&o('"|"')),null!==e?(r=E(),null!==r?e=[e,r]:(e=null,D=i(a))):(e=null,D=i(a)),null!==e&&(e=function(t,e,n,r){return r}(s.offset,s.line,s.column,e[1])),null===e&&(D=i(s));null!==e;)t.push(e),s=i(D),a=i(D),124===n.charCodeAt(D.offset)?(e="|",l(D,1)):(e=null,0===z&&o('"|"')),null!==e?(r=E(),null!==r?e=[e,r]:(e=null,D=i(a))):(e=null,D=i(a)),null!==e&&(e=function(t,e,n,r){return r}(s.offset,s.line,s.column,e[1])),null===e&&(D=i(s));return null!==t&&(t=function(t,e,n,r){return["filters"].concat(r)}(u.offset,u.line,u.column,t)),null===t&&(D=i(u)),z--,0===z&&null===t&&o("filters"),t}function y(){var t,e,r,u,s,a;return z++,s=i(D),a=i(D),t=$(),null!==t?(126===n.charCodeAt(D.offset)?(e="~",l(D,1)):(e=null,0===z&&o('"~"')),null!==e?(r=E(),null!==r?(u=I(),null!==u?t=[t,e,r,u]:(t=null,D=i(a))):(t=null,D=i(a))):(t=null,D=i(a))):(t=null,D=i(a)),null!==t&&(t=function(t,e,n,r){return["special",r].concat([["line",e],["col",n]])}(s.offset,s.line,s.column,t[2])),null===t&&(D=i(s)),z--,0===z&&null===t&&o("special"),t}function b(){var t,e;return z++,e=i(D),t=_(),null!==t&&(t=function(t,e,n,r){var i=["path"].concat(r);return i.text=r[1].join("."),i}(e.offset,e.line,e.column,t)),null===t&&(D=i(e)),null===t&&(e=i(D),t=E(),null!==t&&(t=function(t,e,n,r){var i=["key",r];return i.text=r,i}(e.offset,e.line,e.column,t)),null===t&&(D=i(e))),z--,0===z&&null===t&&o("identifier"),t}function x(){var t,e;return z++,e=i(D),t=w(),null===t&&(t=k()),null!==t&&(t=function(t,e,n,r){return["literal",r]}(e.offset,e.line,e.column,t)),null===t&&(D=i(e)),z--,0===z&&null===t&&o("number"),t}function w(){var t,e,r,u,s,a;if(z++,s=i(D),a=i(D),t=k(),null!==t)if(46===n.charCodeAt(D.offset)?(e=".",l(D,1)):(e=null,0===z&&o('"."')),null!==e){if(u=k(),null!==u)for(r=[];null!==u;)r.push(u),u=k();else r=null;null!==r?t=[t,e,r]:(t=null,D=i(a))}else t=null,D=i(a);else t=null,D=i(a);return null!==t&&(t=function(t,e,n,r,i){return parseFloat(r+"."+i.join(""))}(s.offset,s.line,s.column,t[0],t[2])),null===t&&(D=i(s)),z--,0===z&&null===t&&o("float"),t}function k(){var t,e,r;if(z++,r=i(D),/^[0-9]/.test(n.charAt(D.offset))?(e=n.charAt(D.offset),l(D,1)):(e=null,0===z&&o("[0-9]")),null!==e)for(t=[];null!==e;)t.push(e),/^[0-9]/.test(n.charAt(D.offset))?(e=n.charAt(D.offset),l(D,1)):(e=null,0===z&&o("[0-9]"));else t=null;return null!==t&&(t=function(t,e,n,r){return parseInt(r.join(""),10)}(r.offset,r.line,r.column,t)),null===t&&(D=i(r)),z--,0===z&&null===t&&o("integer"),t}function _(){var t,e,r,u,s;if(z++,u=i(D),s=i(D),t=E(),t=null!==t?t:"",null!==t){if(r=S(),null===r&&(r=A()),null!==r)for(e=[];null!==r;)e.push(r),r=S(),null===r&&(r=A());else e=null;null!==e?t=[t,e]:(t=null,D=i(s))}else t=null,D=i(s);if(null!==t&&(t=function(t,e,n,r,i){return i=i[0],r&&i?(i.unshift(r),[!1,i].concat([["line",e],["col",n]])):[!0,i].concat([["line",e],["col",n]])}(u.offset,u.line,u.column,t[0],t[1])),null===t&&(D=i(u)),null===t){if(u=i(D),s=i(D),46===n.charCodeAt(D.offset)?(t=".",l(D,1)):(t=null,0===z&&o('"."')),null!==t){for(e=[],r=S(),null===r&&(r=A());null!==r;)e.push(r),r=S(),null===r&&(r=A());null!==e?t=[t,e]:(t=null,D=i(s))}else t=null,D=i(s);null!==t&&(t=function(t,e,n,r){return r.length>0?[!0,r[0]].concat([["line",e],["col",n]]):[!0,[]].concat([["line",e],["col",n]])}(u.offset,u.line,u.column,t[1])),null===t&&(D=i(u))}return z--,0===z&&null===t&&o("path"),t}function E(){var t,e,r,u,s;if(z++,u=i(D),s=i(D),/^[a-zA-Z_$]/.test(n.charAt(D.offset))?(t=n.charAt(D.offset),l(D,1)):(t=null,0===z&&o("[a-zA-Z_$]")),null!==t){for(e=[],/^[0-9a-zA-Z_$\-]/.test(n.charAt(D.offset))?(r=n.charAt(D.offset),l(D,1)):(r=null,0===z&&o("[0-9a-zA-Z_$\\-]"));null!==r;)e.push(r),/^[0-9a-zA-Z_$\-]/.test(n.charAt(D.offset))?(r=n.charAt(D.offset),l(D,1)):(r=null,0===z&&o("[0-9a-zA-Z_$\\-]"));null!==e?t=[t,e]:(t=null,D=i(s))}else t=null,D=i(s);return null!==t&&(t=function(t,e,n,r,i){return r+i.join("")}(u.offset,u.line,u.column,t[0],t[1])),null===t&&(D=i(u)),z--,0===z&&null===t&&o("key"),t}function A(){var t,e,r,u,s,a,c,f;if(z++,u=i(D),s=i(D),a=i(D),c=i(D),t=U(),null!==t){if(f=i(D),/^[0-9]/.test(n.charAt(D.offset))?(r=n.charAt(D.offset),l(D,1)):(r=null,0===z&&o("[0-9]")),null!==r)for(e=[];null!==r;)e.push(r),/^[0-9]/.test(n.charAt(D.offset))?(r=n.charAt(D.offset),l(D,1)):(r=null,0===z&&o("[0-9]"));else e=null;null!==e&&(e=function(t,e,n,r){return r.join("")}(f.offset,f.line,f.column,e)),null===e&&(D=i(f)),null===e&&(e=b()),null!==e?(r=M(),null!==r?t=[t,e,r]:(t=null,D=i(c))):(t=null,D=i(c))}else t=null,D=i(c);return null!==t&&(t=function(t,e,n,r){return r}(a.offset,a.line,a.column,t[1])),null===t&&(D=i(a)),null!==t?(e=S(),e=null!==e?e:"",null!==e?t=[t,e]:(t=null,D=i(s))):(t=null,D=i(s)),null!==t&&(t=function(t,e,n,r,i){return i?i.unshift(r):i=[r],i}(u.offset,u.line,u.column,t[0],t[1])),null===t&&(D=i(u)),z--,0===z&&null===t&&o("array"),t}function S(){var t,e,r,u,s,a,c;if(z++,u=i(D),s=i(D),a=i(D),c=i(D),46===n.charCodeAt(D.offset)?(e=".",l(D,1)):(e=null,0===z&&o('"."')),null!==e?(r=E(),null!==r?e=[e,r]:(e=null,D=i(c))):(e=null,D=i(c)),null!==e&&(e=function(t,e,n,r){return r}(a.offset,a.line,a.column,e[1])),null===e&&(D=i(a)),null!==e)for(t=[];null!==e;)t.push(e),a=i(D),c=i(D),46===n.charCodeAt(D.offset)?(e=".",l(D,1)):(e=null,0===z&&o('"."')),null!==e?(r=E(),null!==r?e=[e,r]:(e=null,D=i(c))):(e=null,D=i(c)),null!==e&&(e=function(t,e,n,r){return r}(a.offset,a.line,a.column,e[1])),null===e&&(D=i(a));else t=null;return null!==t?(e=A(),e=null!==e?e:"",null!==e?t=[t,e]:(t=null,D=i(s))):(t=null,D=i(s)),null!==t&&(t=function(t,e,n,r,i){return i?r.concat(i):r}(u.offset,u.line,u.column,t[0],t[1])),null===t&&(D=i(u)),z--,0===z&&null===t&&o("array_part"),t}function C(){var t,e,r,u,s;if(z++,u=i(D),s=i(D),34===n.charCodeAt(D.offset)?(t='"',l(D,1)):(t=null,0===z&&o('"\\""')),null!==t?(34===n.charCodeAt(D.offset)?(e='"',l(D,1)):(e=null,0===z&&o('"\\""')),null!==e?t=[t,e]:(t=null,D=i(s))):(t=null,D=i(s)),null!==t&&(t=function(t,e,n){return["literal",""].concat([["line",e],["col",n]])}(u.offset,u.line,u.column)),null===t&&(D=i(u)),null===t&&(u=i(D),s=i(D),34===n.charCodeAt(D.offset)?(t='"',l(D,1)):(t=null,0===z&&o('"\\""')),null!==t?(e=T(),null!==e?(34===n.charCodeAt(D.offset)?(r='"',l(D,1)):(r=null,0===z&&o('"\\""')),null!==r?t=[t,e,r]:(t=null,D=i(s))):(t=null,D=i(s))):(t=null,D=i(s)),null!==t&&(t=function(t,e,n,r){return["literal",r].concat([["line",e],["col",n]])}(u.offset,u.line,u.column,t[1])),null===t&&(D=i(u)),null===t)){if(u=i(D),s=i(D),34===n.charCodeAt(D.offset)?(t='"',l(D,1)):(t=null,0===z&&o('"\\""')),null!==t){if(r=N(),null!==r)for(e=[];null!==r;)e.push(r),r=N();else e=null;null!==e?(34===n.charCodeAt(D.offset)?(r='"',l(D,1)):(r=null,0===z&&o('"\\""')),null!==r?t=[t,e,r]:(t=null,D=i(s))):(t=null,D=i(s))}else t=null,D=i(s);null!==t&&(t=function(t,e,n,r){return["body"].concat(r).concat([["line",e],["col",n]])}(u.offset,u.line,u.column,t[1])),null===t&&(D=i(u))}return z--,0===z&&null===t&&o("inline"),t}function N(){var t,e;return t=y(),null===t&&(t=v(),null===t&&(e=i(D),t=T(),null!==t&&(t=function(t,e,n,r){return["buffer",r]}(e.offset,e.line,e.column,t)),null===t&&(D=i(e)))),t}function j(){var t,e,r,u,s,a,c,f,h;if(z++,a=i(D),c=i(D),t=H(),null!==t){for(e=[],r=B();null!==r;)e.push(r),r=B();null!==e?t=[t,e]:(t=null,D=i(c))}else t=null,D=i(c);if(null!==t&&(t=function(t,e,n,r,i){return["format",r,i.join("")].concat([["line",e],["col",n]])}(a.offset,a.line,a.column,t[0],t[1])),null===t&&(D=i(a)),null===t){if(a=i(D),c=i(D),f=i(D),h=i(D),z++,e=F(),z--,null===e?e="":(e=null,D=i(h)),null!==e?(h=i(D),z++,r=R(),z--,null===r?r="":(r=null,D=i(h)),null!==r?(h=i(D),z++,u=H(),z--,null===u?u="":(u=null,D=i(h)),null!==u?(n.length>D.offset?(s=n.charAt(D.offset),l(D,1)):(s=null,0===z&&o("any character")),null!==s?e=[e,r,u,s]:(e=null,D=i(f))):(e=null,D=i(f))):(e=null,D=i(f))):(e=null,D=i(f)),null!==e&&(e=function(t,e,n,r){return r}(c.offset,c.line,c.column,e[3])),null===e&&(D=i(c)),null!==e)for(t=[];null!==e;)t.push(e),c=i(D),f=i(D),h=i(D),z++,e=F(),z--,null===e?e="":(e=null,D=i(h)),null!==e?(h=i(D),z++,r=R(),z--,null===r?r="":(r=null,D=i(h)),null!==r?(h=i(D),z++,u=H(),z--,null===u?u="":(u=null,D=i(h)),null!==u?(n.length>D.offset?(s=n.charAt(D.offset),l(D,1)):(s=null,0===z&&o("any character")),null!==s?e=[e,r,u,s]:(e=null,D=i(f))):(e=null,D=i(f))):(e=null,D=i(f))):(e=null,D=i(f)),null!==e&&(e=function(t,e,n,r){return r}(c.offset,c.line,c.column,e[3])),null===e&&(D=i(c));else t=null;null!==t&&(t=function(t,e,n,r){return["buffer",r.join("")].concat([["line",e],["col",n]])}(a.offset,a.line,a.column,t)),null===t&&(D=i(a))}return z--,0===z&&null===t&&o("buffer"),t}function T(){var t,e,r,u,s,a,c;if(z++,u=i(D),s=i(D),a=i(D),c=i(D),z++,e=F(),z--,null===e?e="":(e=null,D=i(c)),null!==e?(r=O(),null===r&&(/^[^"]/.test(n.charAt(D.offset))?(r=n.charAt(D.offset),l(D,1)):(r=null,0===z&&o('[^"]'))),null!==r?e=[e,r]:(e=null,D=i(a))):(e=null,D=i(a)),null!==e&&(e=function(t,e,n,r){return r}(s.offset,s.line,s.column,e[1])),null===e&&(D=i(s)),null!==e)for(t=[];null!==e;)t.push(e),s=i(D),a=i(D),c=i(D),z++,e=F(),z--,null===e?e="":(e=null,D=i(c)),null!==e?(r=O(),null===r&&(/^[^"]/.test(n.charAt(D.offset))?(r=n.charAt(D.offset),l(D,1)):(r=null,0===z&&o('[^"]'))),null!==r?e=[e,r]:(e=null,D=i(a))):(e=null,D=i(a)),null!==e&&(e=function(t,e,n,r){return r}(s.offset,s.line,s.column,e[1])),null===e&&(D=i(s));else t=null;return null!==t&&(t=function(t,e,n,r){return r.join("")}(u.offset,u.line,u.column,t)),null===t&&(D=i(u)),z--,0===z&&null===t&&o("literal"),t}function O(){var t,e;return e=i(D),'\\"'===n.substr(D.offset,2)?(t='\\"',l(D,2)):(t=null,0===z&&o('"\\\\\\""')),null!==t&&(t=function(){return'"'}(e.offset,e.line,e.column)),null===t&&(D=i(e)),t}function R(){var t,e,r,u,s,a,c,f,h;if(z++,s=i(D),a=i(D),"{!"===n.substr(D.offset,2)?(t="{!",l(D,2)):(t=null,0===z&&o('"{!"')),null!==t){for(e=[],c=i(D),f=i(D),h=i(D),z++,"!}"===n.substr(D.offset,2)?(r="!}",l(D,2)):(r=null,0===z&&o('"!}"')),z--,null===r?r="":(r=null,D=i(h)),null!==r?(n.length>D.offset?(u=n.charAt(D.offset),l(D,1)):(u=null,0===z&&o("any character")),null!==u?r=[r,u]:(r=null,D=i(f))):(r=null,D=i(f)),null!==r&&(r=function(t,e,n,r){return r
}(c.offset,c.line,c.column,r[1])),null===r&&(D=i(c));null!==r;)e.push(r),c=i(D),f=i(D),h=i(D),z++,"!}"===n.substr(D.offset,2)?(r="!}",l(D,2)):(r=null,0===z&&o('"!}"')),z--,null===r?r="":(r=null,D=i(h)),null!==r?(n.length>D.offset?(u=n.charAt(D.offset),l(D,1)):(u=null,0===z&&o("any character")),null!==u?r=[r,u]:(r=null,D=i(f))):(r=null,D=i(f)),null!==r&&(r=function(t,e,n,r){return r}(c.offset,c.line,c.column,r[1])),null===r&&(D=i(c));null!==e?("!}"===n.substr(D.offset,2)?(r="!}",l(D,2)):(r=null,0===z&&o('"!}"')),null!==r?t=[t,e,r]:(t=null,D=i(a))):(t=null,D=i(a))}else t=null,D=i(a);return null!==t&&(t=function(t,e,n,r){return["comment",r.join("")].concat([["line",e],["col",n]])}(s.offset,s.line,s.column,t[1])),null===t&&(D=i(s)),z--,0===z&&null===t&&o("comment"),t}function F(){var t,e,r,u,s,a,c,f,h,d,p;if(h=i(D),t=$(),null!==t){for(e=[],r=B();null!==r;)e.push(r),r=B();if(null!==e)if(/^[#?^><+%:@\/~%]/.test(n.charAt(D.offset))?(r=n.charAt(D.offset),l(D,1)):(r=null,0===z&&o("[#?^><+%:@\\/~%]")),null!==r){for(u=[],s=B();null!==s;)u.push(s),s=B();if(null!==u){if(d=i(D),p=i(D),z++,a=I(),z--,null===a?a="":(a=null,D=i(p)),null!==a?(p=i(D),z++,c=H(),z--,null===c?c="":(c=null,D=i(p)),null!==c?(n.length>D.offset?(f=n.charAt(D.offset),l(D,1)):(f=null,0===z&&o("any character")),null!==f?a=[a,c,f]:(a=null,D=i(d))):(a=null,D=i(d))):(a=null,D=i(d)),null!==a)for(s=[];null!==a;)s.push(a),d=i(D),p=i(D),z++,a=I(),z--,null===a?a="":(a=null,D=i(p)),null!==a?(p=i(D),z++,c=H(),z--,null===c?c="":(c=null,D=i(p)),null!==c?(n.length>D.offset?(f=n.charAt(D.offset),l(D,1)):(f=null,0===z&&o("any character")),null!==f?a=[a,c,f]:(a=null,D=i(d))):(a=null,D=i(d))):(a=null,D=i(d));else s=null;if(null!==s){for(a=[],c=B();null!==c;)a.push(c),c=B();null!==a?(c=I(),null!==c?t=[t,e,r,u,s,a,c]:(t=null,D=i(h))):(t=null,D=i(h))}else t=null,D=i(h)}else t=null,D=i(h)}else t=null,D=i(h);else t=null,D=i(h)}else t=null,D=i(h);return null===t&&(t=v()),t}function $(){var t;return 123===n.charCodeAt(D.offset)?(t="{",l(D,1)):(t=null,0===z&&o('"{"')),t}function I(){var t;return 125===n.charCodeAt(D.offset)?(t="}",l(D,1)):(t=null,0===z&&o('"}"')),t}function U(){var t;return 91===n.charCodeAt(D.offset)?(t="[",l(D,1)):(t=null,0===z&&o('"["')),t}function M(){var t;return 93===n.charCodeAt(D.offset)?(t="]",l(D,1)):(t=null,0===z&&o('"]"')),t}function H(){var t;return 10===n.charCodeAt(D.offset)?(t="\n",l(D,1)):(t=null,0===z&&o('"\\n"')),null===t&&("\r\n"===n.substr(D.offset,2)?(t="\r\n",l(D,2)):(t=null,0===z&&o('"\\r\\n"')),null===t&&(13===n.charCodeAt(D.offset)?(t="\r",l(D,1)):(t=null,0===z&&o('"\\r"')),null===t&&(8232===n.charCodeAt(D.offset)?(t="\u2028",l(D,1)):(t=null,0===z&&o('"\\u2028"')),null===t&&(8233===n.charCodeAt(D.offset)?(t="\u2029",l(D,1)):(t=null,0===z&&o('"\\u2029"')))))),t}function B(){var t;return/^[\t\x0B\f \xA0\uFEFF]/.test(n.charAt(D.offset))?(t=n.charAt(D.offset),l(D,1)):(t=null,0===z&&o("[\\t\\x0B\\f \\xA0\\uFEFF]")),null===t&&(t=H()),t}function q(t){t.sort();for(var e=null,n=[],r=0;r<t.length;r++)t[r]!==e&&(n.push(t[r]),e=t[r]);return n}var P={body:u,part:s,section:a,sec_tag_start:c,end_tag:f,context:h,params:d,bodies:p,reference:v,partial:g,filters:m,special:y,identifier:b,number:x,"float":w,integer:k,path:_,key:E,array:A,array_part:S,inline:C,inline_part:N,buffer:j,literal:T,esc:O,comment:R,tag:F,ld:$,rd:I,lb:U,rb:M,eol:H,ws:B};if(void 0!==r){if(void 0===P[r])throw new Error("Invalid rule name: "+t(r)+".")}else r="body";var D={offset:0,line:1,column:1,seenCR:!1},z=0,J={offset:0,line:1,column:1,seenCR:!1},L=[],G=P[r]();if(null===G||D.offset!==n.length){var Q=Math.max(D.offset,J.offset),W=Q<n.length?n.charAt(Q):null,Z=D.offset>J.offset?D:J;throw new e.SyntaxError(q(L),W,Q,Z.line,Z.column)}return G},toSource:function(){return this._source}};return n.SyntaxError=function(e,n,r,i,l){function o(e,n){var r,i;switch(e.length){case 0:r="end of input";break;case 1:r=e[0];break;default:r=e.slice(0,e.length-1).join(", ")+" or "+e[e.length-1]}return i=n?t(n):"end of input","Expected "+r+" but "+i+" found."}this.name="SyntaxError",this.expected=e,this.found=n,this.message=o(e,n),this.offset=r,this.line=i,this.column=l},n.SyntaxError.prototype=Error.prototype,n}();t.parse=e.parse}("undefined"!=typeof n?n:getGlobal())},{}],11:[function(t,e){(function(n){var r=(t("path"),t("./parser")),i=t("vm");e.exports=function(e){var l=t("./compiler")(e);l.parse=r.parse,e.compile=l.compile;var o=i.createContext({dust:e});e.loadSource=function(t,e){return i.runInContext(t,o,e)},e.nextTick=n.nextTick,e.optimizers=l.optimizers}}).call(this,t("/Users/Hashan/Dropbox/Sites/Styles53/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"./compiler":8,"./parser":10,"/Users/Hashan/Dropbox/Sites/Styles53/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":3,path:4,vm:5}],12:[function(t,e,n){(function(){var t=this,r=t._,i={},l=Array.prototype,o=Object.prototype,u=Function.prototype,s=l.push,a=l.slice,c=l.concat,f=o.toString,h=o.hasOwnProperty,d=l.forEach,p=l.map,v=l.reduce,g=l.reduceRight,m=l.filter,y=l.every,b=l.some,x=l.indexOf,w=l.lastIndexOf,k=Array.isArray,_=Object.keys,E=u.bind,A=function(t){return t instanceof A?t:this instanceof A?void(this._wrapped=t):new A(t)};"undefined"!=typeof n?("undefined"!=typeof e&&e.exports&&(n=e.exports=A),n._=A):t._=A,A.VERSION="1.5.2";var S=A.each=A.forEach=function(t,e,n){if(null!=t)if(d&&t.forEach===d)t.forEach(e,n);else if(t.length===+t.length){for(var r=0,l=t.length;l>r;r++)if(e.call(n,t[r],r,t)===i)return}else for(var o=A.keys(t),r=0,l=o.length;l>r;r++)if(e.call(n,t[o[r]],o[r],t)===i)return};A.map=A.collect=function(t,e,n){var r=[];return null==t?r:p&&t.map===p?t.map(e,n):(S(t,function(t,i,l){r.push(e.call(n,t,i,l))}),r)};var C="Reduce of empty array with no initial value";A.reduce=A.foldl=A.inject=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),v&&t.reduce===v)return r&&(e=A.bind(e,r)),i?t.reduce(e,n):t.reduce(e);if(S(t,function(t,l,o){i?n=e.call(r,n,t,l,o):(n=t,i=!0)}),!i)throw new TypeError(C);return n},A.reduceRight=A.foldr=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),g&&t.reduceRight===g)return r&&(e=A.bind(e,r)),i?t.reduceRight(e,n):t.reduceRight(e);var l=t.length;if(l!==+l){var o=A.keys(t);l=o.length}if(S(t,function(u,s,a){s=o?o[--l]:--l,i?n=e.call(r,n,t[s],s,a):(n=t[s],i=!0)}),!i)throw new TypeError(C);return n},A.find=A.detect=function(t,e,n){var r;return N(t,function(t,i,l){return e.call(n,t,i,l)?(r=t,!0):void 0}),r},A.filter=A.select=function(t,e,n){var r=[];return null==t?r:m&&t.filter===m?t.filter(e,n):(S(t,function(t,i,l){e.call(n,t,i,l)&&r.push(t)}),r)},A.reject=function(t,e,n){return A.filter(t,function(t,r,i){return!e.call(n,t,r,i)},n)},A.every=A.all=function(t,e,n){e||(e=A.identity);var r=!0;return null==t?r:y&&t.every===y?t.every(e,n):(S(t,function(t,l,o){return(r=r&&e.call(n,t,l,o))?void 0:i}),!!r)};var N=A.some=A.any=function(t,e,n){e||(e=A.identity);var r=!1;return null==t?r:b&&t.some===b?t.some(e,n):(S(t,function(t,l,o){return r||(r=e.call(n,t,l,o))?i:void 0}),!!r)};A.contains=A.include=function(t,e){return null==t?!1:x&&t.indexOf===x?-1!=t.indexOf(e):N(t,function(t){return t===e})},A.invoke=function(t,e){var n=a.call(arguments,2),r=A.isFunction(e);return A.map(t,function(t){return(r?e:t[e]).apply(t,n)})},A.pluck=function(t,e){return A.map(t,function(t){return t[e]})},A.where=function(t,e,n){return A.isEmpty(e)?n?void 0:[]:A[n?"find":"filter"](t,function(t){for(var n in e)if(e[n]!==t[n])return!1;return!0})},A.findWhere=function(t,e){return A.where(t,e,!0)},A.max=function(t,e,n){if(!e&&A.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!e&&A.isEmpty(t))return-1/0;var r={computed:-1/0,value:-1/0};return S(t,function(t,i,l){var o=e?e.call(n,t,i,l):t;o>r.computed&&(r={value:t,computed:o})}),r.value},A.min=function(t,e,n){if(!e&&A.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!e&&A.isEmpty(t))return 1/0;var r={computed:1/0,value:1/0};return S(t,function(t,i,l){var o=e?e.call(n,t,i,l):t;o<r.computed&&(r={value:t,computed:o})}),r.value},A.shuffle=function(t){var e,n=0,r=[];return S(t,function(t){e=A.random(n++),r[n-1]=r[e],r[e]=t}),r},A.sample=function(t,e,n){return arguments.length<2||n?t[A.random(t.length-1)]:A.shuffle(t).slice(0,Math.max(0,e))};var j=function(t){return A.isFunction(t)?t:function(e){return e[t]}};A.sortBy=function(t,e,n){var r=j(e);return A.pluck(A.map(t,function(t,e,i){return{value:t,index:e,criteria:r.call(n,t,e,i)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return t.index-e.index}),"value")};var T=function(t){return function(e,n,r){var i={},l=null==n?A.identity:j(n);return S(e,function(n,o){var u=l.call(r,n,o,e);t(i,u,n)}),i}};A.groupBy=T(function(t,e,n){(A.has(t,e)?t[e]:t[e]=[]).push(n)}),A.indexBy=T(function(t,e,n){t[e]=n}),A.countBy=T(function(t,e){A.has(t,e)?t[e]++:t[e]=1}),A.sortedIndex=function(t,e,n,r){n=null==n?A.identity:j(n);for(var i=n.call(r,e),l=0,o=t.length;o>l;){var u=l+o>>>1;n.call(r,t[u])<i?l=u+1:o=u}return l},A.toArray=function(t){return t?A.isArray(t)?a.call(t):t.length===+t.length?A.map(t,A.identity):A.values(t):[]},A.size=function(t){return null==t?0:t.length===+t.length?t.length:A.keys(t).length},A.first=A.head=A.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:a.call(t,0,e)},A.initial=function(t,e,n){return a.call(t,0,t.length-(null==e||n?1:e))},A.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:a.call(t,Math.max(t.length-e,0))},A.rest=A.tail=A.drop=function(t,e,n){return a.call(t,null==e||n?1:e)},A.compact=function(t){return A.filter(t,A.identity)};var O=function(t,e,n){return e&&A.every(t,A.isArray)?c.apply(n,t):(S(t,function(t){A.isArray(t)||A.isArguments(t)?e?s.apply(n,t):O(t,e,n):n.push(t)}),n)};A.flatten=function(t,e){return O(t,e,[])},A.without=function(t){return A.difference(t,a.call(arguments,1))},A.uniq=A.unique=function(t,e,n,r){A.isFunction(e)&&(r=n,n=e,e=!1);var i=n?A.map(t,n,r):t,l=[],o=[];return S(i,function(n,r){(e?r&&o[o.length-1]===n:A.contains(o,n))||(o.push(n),l.push(t[r]))}),l},A.union=function(){return A.uniq(A.flatten(arguments,!0))},A.intersection=function(t){var e=a.call(arguments,1);return A.filter(A.uniq(t),function(t){return A.every(e,function(e){return A.indexOf(e,t)>=0})})},A.difference=function(t){var e=c.apply(l,a.call(arguments,1));return A.filter(t,function(t){return!A.contains(e,t)})},A.zip=function(){for(var t=A.max(A.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;t>n;n++)e[n]=A.pluck(arguments,""+n);return e},A.object=function(t,e){if(null==t)return{};for(var n={},r=0,i=t.length;i>r;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},A.indexOf=function(t,e,n){if(null==t)return-1;var r=0,i=t.length;if(n){if("number"!=typeof n)return r=A.sortedIndex(t,e),t[r]===e?r:-1;r=0>n?Math.max(0,i+n):n}if(x&&t.indexOf===x)return t.indexOf(e,n);for(;i>r;r++)if(t[r]===e)return r;return-1},A.lastIndexOf=function(t,e,n){if(null==t)return-1;var r=null!=n;if(w&&t.lastIndexOf===w)return r?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var i=r?n:t.length;i--;)if(t[i]===e)return i;return-1},A.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=0,l=new Array(r);r>i;)l[i++]=t,t+=n;return l};var R=function(){};A.bind=function(t,e){var n,r;if(E&&t.bind===E)return E.apply(t,a.call(arguments,1));if(!A.isFunction(t))throw new TypeError;return n=a.call(arguments,2),r=function(){if(!(this instanceof r))return t.apply(e,n.concat(a.call(arguments)));R.prototype=t.prototype;var i=new R;R.prototype=null;var l=t.apply(i,n.concat(a.call(arguments)));return Object(l)===l?l:i}},A.partial=function(t){var e=a.call(arguments,1);return function(){return t.apply(this,e.concat(a.call(arguments)))}},A.bindAll=function(t){var e=a.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return S(e,function(e){t[e]=A.bind(t[e],t)}),t},A.memoize=function(t,e){var n={};return e||(e=A.identity),function(){var r=e.apply(this,arguments);return A.has(n,r)?n[r]:n[r]=t.apply(this,arguments)}},A.delay=function(t,e){var n=a.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},A.defer=function(t){return A.delay.apply(A,[t,1].concat(a.call(arguments,1)))},A.throttle=function(t,e,n){var r,i,l,o=null,u=0;n||(n={});var s=function(){u=n.leading===!1?0:new Date,o=null,l=t.apply(r,i)};return function(){var a=new Date;u||n.leading!==!1||(u=a);var c=e-(a-u);return r=this,i=arguments,0>=c?(clearTimeout(o),o=null,u=a,l=t.apply(r,i)):o||n.trailing===!1||(o=setTimeout(s,c)),l}},A.debounce=function(t,e,n){var r,i,l,o,u;return function(){l=this,i=arguments,o=new Date;var s=function(){var a=new Date-o;e>a?r=setTimeout(s,e-a):(r=null,n||(u=t.apply(l,i)))},a=n&&!r;return r||(r=setTimeout(s,e)),a&&(u=t.apply(l,i)),u}},A.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},A.wrap=function(t,e){return function(){var n=[t];return s.apply(n,arguments),e.apply(this,n)}},A.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},A.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},A.keys=_||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)A.has(t,n)&&e.push(n);return e},A.values=function(t){for(var e=A.keys(t),n=e.length,r=new Array(n),i=0;n>i;i++)r[i]=t[e[i]];return r},A.pairs=function(t){for(var e=A.keys(t),n=e.length,r=new Array(n),i=0;n>i;i++)r[i]=[e[i],t[e[i]]];return r},A.invert=function(t){for(var e={},n=A.keys(t),r=0,i=n.length;i>r;r++)e[t[n[r]]]=n[r];return e},A.functions=A.methods=function(t){var e=[];for(var n in t)A.isFunction(t[n])&&e.push(n);return e.sort()},A.extend=function(t){return S(a.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},A.pick=function(t){var e={},n=c.apply(l,a.call(arguments,1));return S(n,function(n){n in t&&(e[n]=t[n])}),e},A.omit=function(t){var e={},n=c.apply(l,a.call(arguments,1));for(var r in t)A.contains(n,r)||(e[r]=t[r]);return e},A.defaults=function(t){return S(a.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},A.clone=function(t){return A.isObject(t)?A.isArray(t)?t.slice():A.extend({},t):t},A.tap=function(t,e){return e(t),t};var F=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof A&&(t=t._wrapped),e instanceof A&&(e=e._wrapped);var i=f.call(t);if(i!=f.call(e))return!1;switch(i){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var l=n.length;l--;)if(n[l]==t)return r[l]==e;var o=t.constructor,u=e.constructor;if(o!==u&&!(A.isFunction(o)&&o instanceof o&&A.isFunction(u)&&u instanceof u))return!1;n.push(t),r.push(e);var s=0,a=!0;if("[object Array]"==i){if(s=t.length,a=s==e.length)for(;s--&&(a=F(t[s],e[s],n,r)););}else{for(var c in t)if(A.has(t,c)&&(s++,!(a=A.has(e,c)&&F(t[c],e[c],n,r))))break;if(a){for(c in e)if(A.has(e,c)&&!s--)break;a=!s}}return n.pop(),r.pop(),a};A.isEqual=function(t,e){return F(t,e,[],[])},A.isEmpty=function(t){if(null==t)return!0;if(A.isArray(t)||A.isString(t))return 0===t.length;for(var e in t)if(A.has(t,e))return!1;return!0},A.isElement=function(t){return!(!t||1!==t.nodeType)},A.isArray=k||function(t){return"[object Array]"==f.call(t)},A.isObject=function(t){return t===Object(t)},S(["Arguments","Function","String","Number","Date","RegExp"],function(t){A["is"+t]=function(e){return f.call(e)=="[object "+t+"]"}}),A.isArguments(arguments)||(A.isArguments=function(t){return!(!t||!A.has(t,"callee"))}),"function"!=typeof/./&&(A.isFunction=function(t){return"function"==typeof t}),A.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},A.isNaN=function(t){return A.isNumber(t)&&t!=+t},A.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==f.call(t)},A.isNull=function(t){return null===t},A.isUndefined=function(t){return void 0===t},A.has=function(t,e){return h.call(t,e)},A.noConflict=function(){return t._=r,this},A.identity=function(t){return t},A.times=function(t,e,n){for(var r=Array(Math.max(0,t)),i=0;t>i;i++)r[i]=e.call(n,i);return r},A.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var $={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};$.unescape=A.invert($.escape);var I={escape:new RegExp("["+A.keys($.escape).join("")+"]","g"),unescape:new RegExp("("+A.keys($.unescape).join("|")+")","g")};A.each(["escape","unescape"],function(t){A[t]=function(e){return null==e?"":(""+e).replace(I[t],function(e){return $[t][e]})}}),A.result=function(t,e){if(null==t)return void 0;var n=t[e];return A.isFunction(n)?n.call(t):n},A.mixin=function(t){S(A.functions(t),function(e){var n=A[e]=t[e];A.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),q.call(this,n.apply(A,t))}})};var U=0;A.uniqueId=function(t){var e=++U+"";return t?t+e:e},A.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var M=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;A.template=function(t,e,n){var r;n=A.defaults({},n,A.templateSettings);var i=new RegExp([(n.escape||M).source,(n.interpolate||M).source,(n.evaluate||M).source].join("|")+"|$","g"),l=0,o="__p+='";t.replace(i,function(e,n,r,i,u){return o+=t.slice(l,u).replace(B,function(t){return"\\"+H[t]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),l=u+e.length,e}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(e)return r(e,A);var s=function(t){return r.call(this,t,A)};return s.source="function("+(n.variable||"obj")+"){\n"+o+"}",s},A.chain=function(t){return A(t).chain()};var q=function(t){return this._chain?A(t).chain():t};A.mixin(A),S(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=l[t];A.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],q.call(this,n)}}),S(["concat","join","slice"],function(t){var e=l[t];A.prototype[t]=function(){return q.call(this,e.apply(this._wrapped,arguments))}}),A.extend(A.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)},{}],13:[function(t,e){var n=t("dustjs-linkedin/lib/dust");n.helper=t("dustjs-helpers");var r=t("backbone");r.$=$;var i=t("underscore");r.Controller=r.View.extend({render:function(t){return t||(t={}),this.state&&(t=i.extend(t,this.state.toJSON())),this.model&&(t=i.extend(t,this.model.toJSON())),n.render(this.template,t,function(t,e){this.$el.html(e),this.delegateEvents(),this.subviews&&this.subviews()}.bind(this)),this},find:function(t){return this.$el.find(t)},findById:function(t){return this.find("#"+t)}},{create:function(t){if(void 0===this.prototype.requires||this.prototype.requires!==!1){console.log("foux");var e=new this(t);return console.log(e),e.$el.addClass(this.prototype.className),e}}}),e.exports=r},{backbone:2,"dustjs-helpers":7,"dustjs-linkedin/lib/dust":9,underscore:12}],14:[function(t,e){var n,r,i=t("./backbone");window.getSelection&&document.createRange?(n=function(t){var e=window.getSelection().getRangeAt(0),n=e.cloneRange();n.selectNodeContents(t),n.setEnd(e.startContainer,e.startOffset);var r=n.toString().length;return{start:r,end:r+e.toString().length}},r=function(t,e){var n=0,r=document.createRange();r.setStart(t,0),r.collapse(!0);for(var i,l=[t],o=!1,u=!1;!u&&(i=l.pop());)if(3==i.nodeType){var s=n+i.length;!o&&e.start>=n&&e.start<=s&&(r.setStart(i,e.start-n),o=!0),o&&e.end>=n&&e.end<=s&&(r.setEnd(i,e.end-n),u=!0),n=s}else for(var a=i.childNodes.length;a--;)l.push(i.childNodes[a]);var c=window.getSelection();c.removeAllRanges(),c.addRange(r)}):document.selection&&(n=function(t){var e=document.selection.createRange(),n=document.body.createTextRange();n.moveToElementText(t),n.setEndPoint("EndToStart",e);var r=n.text.length;return{start:r,end:r+e.text.length}},r=function(t,e){var n=document.body.createTextRange();n.moveToElementText(t),n.collapse(!0),n.moveEnd("character",e.end),n.moveStart("character",e.start),n.select()});var l=i.Controller.extend({className:"codebox",events:{keyup:"highlight",keydown:"indent"},initialize:function(t){this.mode=t.mode,this.$el.attr("spellcheck",!1)},indent:function(t){9===t.keyCode&&(document.execCommand("indent"),t.preventDefault())},highlight:function(t){if(console.log(n(this.el)),!t||!(13===t.keyCode||t.keyCode>=37&&t.keyCode<=40||9===t.keyCode||8===t.keyCode)){var e=n(this.el),i=this.$el.clone();i.find("span").contents().unwrap();var l=i.html();["keyword","string","parameter","comment"].forEach(function(t){this.mode[t]&&this.mode[t].forEach(function(e){e=new RegExp("("+e.source+")"+/(?![^<>]*>)/.source,"g"),l=l.replace(e,function(e){return'<span class="'+t+'">'+e+"</span>"})})}.bind(this)),this.$el.html(("<div>"+l.replace(/\n/g,"</div><div>").replace("/\\t/g     ")+"</div>").replace(/<div><\/div>/g,"<div><br></div>")),r(this.el,e)}},val:function(t){return t?(this.$el.html(t),void this.highlight()):this.$el.html().replace(/<\/div>(?!$)/g,"\n").replace(/(<([^>]+)>)/gi,"")}},{Modes:{JavaScript:{string:[/"([a-zA-Z0-9]|\s|\}|\{|\(|\)|\s)*(")?/g,/'([^\\'\n]|\\.)*/g],keyword:[/\b(class)/g,/\b(function)/g,/\b(var)/g,/\b(new)/g],comment:[/\/\/.*$/g]},Python:{},LaTeX:{string:[/\\[a-zA-Z]+/g],parameter:[/\\[a-zA-Z]+\{([a-zA-Z]+)\}/g]}}});e.exports=l},{"./backbone":13}],15:[function(t,e){var n=t("./backbone"),r=t("./codebox"),i=t("../app/blogs/editor.dust"),l=n.Model.extend({defaults:{mode:"rich-text-editor"}}),o=n.Controller.extend({template:i,className:"editor",requires:Modernizr.contenteditable,events:{"change .editor-mode":"updateMode","click .editor-toolbar button":"updateFormat","change select.font-control":"updateFont","click .editor-rich":"reconfigure","keydown .editor-rich":"reconfigure","keyup .editor-content":"transpose","click .open-editor":"openEditor","click .open-preview":"openPreview"},setControl:function(t){this.controls=t,this.controls.hide(),this.$el.insertBefore(this.controls),this.render(),this.$el.find(".editor-content").html(this.controls.val())},initialize:function(t){this.state=new l,this.state.set("modeName",t.modeName),this.listenTo(this.state,"change",this.render),this.setControl(t.controls)},updateMode:function(t){this.state.set("mode",t.target.value),this.trigger("change",""),t.preventDefault()},updateFormat:function(t){var e=$(t.target);document.execCommand(e.val()),e.toggleClass("active"),t.preventDefault()},updateFont:function(t){document.execCommand("fontName",!1,t.target.value)},reconfigure:function(){["bold","underline","italic","insertOrderedList","insertUnorderedList"].forEach(function(t){document.queryCommandState(t)?this.find('[value="'+t+'"]').addClass("active"):this.find('[value="'+t+'"]').removeClass("active")}.bind(this))},transpose:function(){if(this.controls){var t=this.find(".editor-content"),e="rich-text-editor"===this.state.get("mode")?t.html():this.editor.val();this.trigger("change",e),console.log("fsdsdfsdf")}},openEditor:function(t){this.find(".editor-preview").hide(),this.find(".editor-content").show(),$(t.target).toggleClass("active"),$(t.target).siblings().removeClass("active")},openPreview:function(t){$(t.target).toggleClass("active"),$(t.target).siblings().removeClass("active"),this.find(".editor-content").hide();var e=this.find(".editor-preview");e.html($('<script type="math/tex">').html(this.editor.val())),e.show(),MathJax.Hub.Queue(["Typeset",MathJax.Hub,e.get(0)])},subviews:function(){console.log(this.controls.val()),this.$el.find(".editor-content").val(this.controls.val()),this.editor="latex"===this.state.get("mode")?r.create({el:this.find(".editor-content"),mode:r.Modes.LaTeX}):void 0}});e.exports=o},{"../app/blogs/editor.dust":1,"./backbone":13,"./codebox":14}]},{},[15]);